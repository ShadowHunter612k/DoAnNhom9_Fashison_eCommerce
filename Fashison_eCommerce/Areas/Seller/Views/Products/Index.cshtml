@model IEnumerable<Fashison_eCommerce.Models.Product>
@*@model PagedList.IPagedList<Fashison_eCommerce.Models.Product>
    @using PagedList.Mvc;*@

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Seller/Views/Shared/_Layout.cshtml";
}

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
@*@using (Html.BeginForm("Index", "Products", FormMethod.Get))*@

@*{*@
@*@using (Ajax.BeginForm("Index", "Products", new AjaxOptions { UpdateTargetId = "content" }))
    {*@
<div>
    <label>Tên sản phẩm</label>
    <input type="text" id="Name" placeholder="Nhập vào" />
    <br />
    <label>Loại</label>
    @Html.DropDownList("MaintypeID", null, "Select one")
   
    @Html.DropDownList("TypeID", null, "Select one")
    <label>Kho hàng</label>
    <input type="number" value="0" min="0" id="MinAmount" />
    <label>-</label>
    <input type="number" value="0" min="0" id="MaxAmount" />
    <button id="search">Tìm</button>

</div>
       
 
 <p>
     @Html.ActionLink("Create New", "Create")
 </p>


@*}*@
@Html.Partial("~/Areas/Seller/Views/Products/Search.cshtml", Model);
<script>
    $(document).ready(function () {
        $("#search").click(function (e) {
            e.preventDefault();
            debugger
            
            var name = $("#Name").val();
            var type = $("#TypeID").val();
            var min = $("#MinAmount").val();
            var max = $("#MaxAmount").val();
            $.ajax(
                {
                    type: 'GET',
                    url: "/Products/Search",
                    data: { Name: name, TypeID: type, MinAmount: min, MaxAmount: max },
                    success: function (response) {
                        console.log(response);
                        $("table#product").html(response);
                    }
                });
        });
        $("#MaintypeID").change(function () {
            
            $.get("/Products/GetTypeList", { MaintypeID: $("#MaintypeID").val() }, function (data) {
                $("#TypeID").empty();
                $.each(data, function (index, row) {
                    $("#TypeID").append("<option value='" + row.TypeID + "'>" + row.Name+"</option>")
                });
            });

        });

    });

</script>
@*}*@

@*<section id="content">

    </section>*@


@*<p>
        @Html.ActionLink("Create New", "Create")
    </p>
    <table class="table">
        <tr>
            <th>
                Name
            </th>
            <th>
               Price
            </th>
            <th>
                Amount
            </th>
            <th>
                Pictures
            </th>
            <th>
               Decription
            </th>
            <th>
                Address
            </th>
            <th>
                Type Name
            </th>
            <th>
                Brand Name
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Price)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Amount)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Pictures)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Decription)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Store.Address)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Product_Type.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Brand.BrandName)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.Product_ID }) |
                    @Html.ActionLink("Details", "Details", new { id = item.Product_ID }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.Product_ID })
                </td>
            </tr>
        }

    </table>*@

@*<div class="col-md-6 col-lg-6 col-xs-6 col-sm-6 text-right ">
        Trang: @(Model.PageCount< Model.PageNumber ? 0:Model.PageNumber)/@Model.PageCount

    </div>

    <div class="pagination">
        @Html.PagedListPager(Model, page => Url.Action("Index", new { page }))
    </div>*@



